<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<html>
<head> <title> JIT Warning </title> </head>
<body>

<h2>
JIT WARNING
</h2>
It has been our experience that many JIT compilers still don't
have all the bugs worked out yet.  If you experience any unusual
results while using the JLAPACK software, try turning off
the JIT first.  If the problem persists, let us know.

<p>
I'm in the process of compiling a list of examples that illustrate
some of the JIT bugs.  The point of this page is not to show how
bad JITs are, but to warn JLAPACK users of some potential problems
that may cause incorrect results.  I'm working on a brief report
which will summarize the test results on different platforms/JVMs.
<hr>

The first example is for AIX 4.1.5 with IBM's JDK 1.1.4.
<pre> 
public class breakAIX {
  public static void main(String [] args) {
    double yy[];
    int j;

    yy = new double[3];

    for(j=0;j&lt;3;j++)
      yy[j] =    j* (j *j);

    for(j=0;j&lt;3;j++)
      System.out.println("yy["+j+"] = " + yy[j]);
  }
}
</pre>
When run with JIT enabled, we get the following results:
<pre>
austin&gt; java tst
yy[0] = 0.0
yy[1] = 1.0
yy[2] = 4.0
</pre>
But with the JIT disabled, we get the correct results:
<pre>
austin&gt; java -Djava.compiler=off tst
yy[0] = 0.0
yy[1] = 1.0
yy[2] = 8.0
</pre>
<hr>
While testing Kaffe 0.10.0 on Solaris 2.5, I noticed this
problem.  Assigning 0.0 to a double array doesn't work
correctly.
<pre> 
public class breakKaffeSol2 {
  public static void main(String [] args) {
    double a [] = new double[1];
 
    a[0] = 0.0;

    System.out.println(a[0]);
  }
}
</pre>
First, the correct results (from Sun's JDK):
<pre>
woodstock&gt; java breakKaffeSol2
0.0
</pre>
Now, the results from Kaffe.
<pre>
woodstock&gt; kaffe breakKaffeSol2
-9.193949850943365E228
</pre>
Incidentally, this code works correctly with Kaffe 0.10.0 under
Linux 2.0.29.

<hr>
Windows NT 4.0 / Sun JDK 1.1.6 (Symantec JIT)
example coming soon.
<hr>
More examples to come as I perform more testing.
<hr>
<a href="http://www.cs.utk.edu/f2j/download.html">Back</a> 
to the download page.
</body>
</html>
