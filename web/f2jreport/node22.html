<!DOCTYPE HTML PUBLIC "-//IETF//DTD HTML 2.0//EN">
<!--Converted with LaTeX2HTML 96.1 (Feb 5, 1996) by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds -->
<HTML>
<HEAD>
<TITLE>Implemention of the f2j compiler</TITLE>
<META NAME="description" CONTENT="Implemention of the f2j compiler">
<META NAME="keywords" CONTENT="f2jreport">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<LINK REL=STYLESHEET HREF="f2jreport.css">
</HEAD>
<BODY LANG="EN">
 <A NAME="tex2html309" HREF="node23.html"><IMG WIDTH=37 HEIGHT=24 ALIGN=BOTTOM ALT="next" SRC="http://www.cs.utk.edu/~icl/WebSite/icons/next_motif.gif"></A> <A NAME="tex2html307" HREF="node2.html"><IMG WIDTH=26 HEIGHT=24 ALIGN=BOTTOM ALT="up" SRC="http://www.cs.utk.edu/~icl/WebSite/icons/up_motif.gif"></A> <A NAME="tex2html303" HREF="node21.html"><IMG WIDTH=63 HEIGHT=24 ALIGN=BOTTOM ALT="previous" SRC="http://www.cs.utk.edu/~icl/WebSite/icons/previous_motif.gif"></A>   <BR>
<B> Next:</B> <A NAME="tex2html310" HREF="node23.html">Lexing FORTRAN</A>
<B>Up:</B> <A NAME="tex2html308" HREF="node2.html">Design of the f2j </A>
<B> Previous:</B> <A NAME="tex2html304" HREF="node21.html">Functions as Arguments</A>
<BR> <P>
<H2><A NAME="SECTION00022000000000000000">Implemention of the f2j compiler</A></H2>
<P>
<BLOCKQUOTE> <EM>
The program f2c is a horror, based on ancient code 
and hacked unmercifully.  Users are only supposed 
to look at its C output, not at its appalling inner
workings. --Stuart Feldman&nbsp;[<A HREF="node35.html#feldmansi95">9</A>]</EM>
</BLOCKQUOTE>
<P>
The f2j compiler system was written in ANSI C, using
a C parser generated by the Bison parser generator.
The code was written from scratch after determining that 
existing F<font size=-1><small>ORTRAN</small></font> tools such as f2c and g77 would be 
difficult to modify.  Similarly, the Bison grammar was
derived from the F<font size=-1><small>ORTRAN</small></font> 77 standard since available
parse files would have needed extensive rewriting to 
produce an abstract syntax tree (AST).  The BLAS and 
LAPACK source code are assumed to be syntactically 
correct F<font size=-1><small>ORTRAN</small></font>.  Comments in the compiler source are
written as complete sentences, starting with a capital letter 
and ending with a period.  Comments from the F<font size=-1><small>ORTRAN</small></font>\
source are preserved in the translation as Java comments.
The f2java executable may generate either Java source code
or Jasmin opcode, depending on the command-line options
(<TT>-java</TT> or <TT>-jas</TT>).
<P>
<BR> <HR>
<UL> 
<LI> <A NAME="tex2html311" HREF="node23.html#SECTION00022100000000000000">Lexing F<font size=-1><small>ORTRAN</small></font></A>
<LI> <A NAME="tex2html312" HREF="node24.html#SECTION00022200000000000000">Parsing F<font size=-1><small>ORTRAN</small></font></A>
<LI> <A NAME="tex2html313" HREF="node25.html#SECTION00022300000000000000">Code generation</A>
<UL> 
<LI> <A NAME="tex2html314" HREF="node26.html#SECTION00022310000000000000">Java code</A>
<LI> <A NAME="tex2html315" HREF="node27.html#SECTION00022320000000000000">Jasmin opcode</A>
</UL>
</UL>
<BR> <HR>
<P><ADDRESS>
<I>Keith Seymour <BR>
Wed Jun 10 19:38:14 EDT 1998</I>
</ADDRESS>
</BODY>
</HTML>
